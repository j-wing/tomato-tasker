{"version":3,"sources":["TaskItem.tsx","Timer.tsx","App.tsx","index.js"],"names":["TaskItem","className","this","props","task","taskNum","placeholder","defaultValue","before","onChange","beforeChangeHandler","after","afterChangeHandler","React","Component","Timer","timer","state","timerValue","timerRunning","btnText","Math","floor","onClick","toggleRunning","bind","reset","setState","s","oldProps","oldState","kickOffTimer","clearTimeout","Notification","resetHandler","setTimeout","App","checkNotificationPermission","taskItems","items","flatMap","t","i","key","e","handleBeforeChange","handleAfterChange","handleReset","taskIndex","newVal","target","value","update","$merge","$splice","newTask","length","window","permission","requestPermission","then","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.10cf4173.chunk.js","sourcesContent":["import React from 'react';\nimport { Task } from './task';\n\ninterface TaskItemProps {\n    task: Task,\n    beforeChangeHandler: React.ChangeEventHandler,\n    afterChangeHandler: React.ChangeEventHandler,\n}\n\ninterface TaskItemState {\n}\n\nexport class TaskItem extends React.Component<TaskItemProps, TaskItemState> {\n    render() {\n        return <div className=\"task-item\">\n            <div className=\"task-id\">\n                {this.props.task.taskNum + 1}\n            </div>\n            <textarea className=\"before\"\n                placeholder=\"Before\"\n                defaultValue={this.props.task.before}\n                onChange={this.props.beforeChangeHandler}></textarea>\n            <textarea\n                className=\"after\"\n                placeholder=\"After\"\n                defaultValue={this.props.task.after}\n                onChange={this.props.afterChangeHandler}></textarea>\n        </div>\n\n    }\n}\n","import React from 'react';\n\ninterface TimerProps {\n    resetHandler: () => void,\n}\n\ninterface TimerState {\n      timerValue: number,\n      timerRunning: boolean,\n}\n\nconst TIMER_DEFAULT = 60 * 25;\n\nexport class Timer extends React.Component<TimerProps, TimerState> {\n    timer: NodeJS.Timeout | null = null;\n    \n    constructor(props: TimerProps) {\n        super(props);\n\n        this.state  = {\n            timerValue: TIMER_DEFAULT,\n            timerRunning: false\n        }\n    }\n\n    render() {\n        let btnText = (this.state.timerRunning) ? \"Pause\" : \"Start\";\n\n        return <div className=\"timer\">\n            <div className=\"timerText\">\n                {Math.floor(this.state.timerValue / 60)}:{this.state.timerValue % 60}\n            </div>\n            <button onClick={this.toggleRunning.bind(this)}>\n                {btnText}\n            </button>\n            <button onClick={this.reset.bind(this)}>\n                + New\n            </button>\n        </div>\n    }\n\n    toggleRunning() {\n        this.setState(s => ({timerRunning: !s.timerRunning}));\n    }\n\n    componentDidUpdate(oldProps: TimerProps, oldState: TimerState) {\n        if (this.state.timerRunning && !oldState.timerRunning) {\n            this.kickOffTimer();\n        } else if (!this.state.timerRunning && oldState.timerRunning && this.timer !== null) {\n            clearTimeout(this.timer);\n        }\n\n        if (this.state.timerValue === 0 && oldState.timerValue !== 0) {\n            new Notification(\"Pomo Timer Finished!\");\n        }\n    }\n\n    reset() {\n        this.setState({\n            timerRunning: false,\n            timerValue: TIMER_DEFAULT\n        })\n        this.props.resetHandler();\n    }\n\n    kickOffTimer() {\n        if (this.state.timerValue === 0) {\n            return;\n        }\n\n        this.timer = setTimeout(() => {\n            this.setState(s => ({timerValue: s.timerValue - 1}));\n            this.kickOffTimer();\n        }, 1000);\n    }\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport update from 'immutability-helper';\n\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { TaskItem } from './TaskItem';\nimport { Timer } from './Timer';\nimport { Task } from './task';\n\n\n\ninterface AppProps {\n}\n\ninterface AppState {\n  taskItems: Array<Task>\n\n}\n\nclass App extends React.Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n\n    this.checkNotificationPermission();\n\n    this.state = {\n      taskItems: [{before: \"\", after: \"\", taskNum: 0}]\n    };\n  }\n\n  render() {\n    let items = this.state.taskItems.flatMap((t, i) => \n      <TaskItem\n        task={t}\n        key={t.taskNum}\n        beforeChangeHandler={e => this.handleBeforeChange(i, e)}\n        afterChangeHandler={e => this.handleAfterChange(i, e)} />\n    );\n    return <div className=\"app\">\n      <Timer resetHandler={this.handleReset.bind(this)} />\n      <div className=\"items\">\n        {items}\n      </div>\"\n    </div>\n  }\n\n  handleBeforeChange(taskIndex: number, e: React.ChangeEvent) {\n    let newVal = (e.target as HTMLTextAreaElement).value;\n    this.setState(s => {\n      let task = update(this.state.taskItems[taskIndex], {$merge: {before: newVal}});\n      return {taskItems: update(s.taskItems, {$splice: [[taskIndex, 1, task]]})}\n    });\n\n  }\n\n  handleAfterChange(taskIndex: number, e: React.ChangeEvent) {\n    let newVal = (e.target as HTMLTextAreaElement).value;\n    this.setState(s => {\n      let task = update(this.state.taskItems[taskIndex], {$merge: {after: newVal}});\n      return {taskItems: update(s.taskItems, {$splice: [[taskIndex, 1, task]]})}\n    });\n  }\n\n  handleReset() {\n    this.setState(s => {\n      let newTask: Task = { before: \"\", after: \"\", taskNum: s.taskItems.length };\n      return {\n        taskItems: update(s.taskItems, { $splice: [[0, 0, newTask]] })\n      }\n    });\n  }\n\n  checkNotificationPermission() {\n    if (window.Notification.permission !== \"granted\") {\n      window.Notification.requestPermission().then(p => {\n        if (p === \"granted\") {\n          new Notification(\"Tomato Tasker notifications are on!\");\n        }\n      })\n    }\n  }\n}\n\nexport default App;\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}